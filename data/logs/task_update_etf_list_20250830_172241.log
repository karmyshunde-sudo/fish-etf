2025-08-30 17:22:41,408 - root - INFO - 创建目录: /home/runner/work/fish-etf/fish-etf/logs
2025-08-30 17:22:41,409 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:41,409 - root - INFO - 配置初始化完成
2025-08-30 17:22:41,409 - root - INFO - 检测到WECOM_WEBHOOK环境变量已设置
2025-08-30 17:22:41,827 - root - INFO - 当前北京时间: 2025-08-30 17:22:41
2025-08-30 17:22:41,827 - root - INFO - 当前UTC时间: 2025-08-30 09:22:41
2025-08-30 17:22:41,828 - root - INFO - 北京时间时区: UTC+08:00
2025-08-30 17:22:41,828 - root - INFO - UTC时间时区: UTC
2025-08-30 17:22:41,828 - root - WARNING - 时区偏移不正确: 北京时间与UTC时间相差 -0.00 小时
2025-08-30 17:22:43,229 - data_crawler.akshare_crawler - INFO - AkShare爬虫模块初始化完成
2025-08-30 17:22:43,231 - data_crawler.sina_crawler - INFO - 新浪爬虫模块初始化完成
2025-08-30 17:22:43,232 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,232 - data_crawler - INFO - 开始更新ETF列表
2025-08-30 17:22:43,232 - data_crawler.etf_list_manager - INFO - ℹ️ 无需更新，加载本地ETF列表
2025-08-30 17:22:43,234 - data_crawler - INFO - ETF列表更新成功，共322只ETF
2025-08-30 17:22:43,234 - data_crawler - INFO - 数据爬取模块初始化完成
2025-08-30 17:22:43,240 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,240 - wechat_push.push - INFO - 微信推送模块初始化完成
2025-08-30 17:22:43,250 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,251 - strategy.etf_scoring - INFO - ETF评分系统初始化完成
2025-08-30 17:22:43,251 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,251 - strategy.arbitrage - INFO - 套利策略模块初始化完成
2025-08-30 17:22:43,255 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,255 - strategy.position - INFO - 仓位管理模块初始化完成
2025-08-30 17:22:43,255 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,256 - strategy - INFO - 策略模块初始化完成
2025-08-30 17:22:43,256 - root - INFO - 日志文件已配置: /home/runner/work/fish-etf/fish-etf/logs/etf_strategy.log
2025-08-30 17:22:43,256 - __main__ - INFO - ===== 开始执行任务：update_etf_list =====
2025-08-30 17:22:43,256 - __main__ - INFO - UTC时间：2025-08-30 09:22:43
2025-08-30 17:22:43,256 - __main__ - INFO - 北京时间：2025-08-30 17:22:43
2025-08-30 17:22:43,256 - __main__ - INFO - 开始设置运行环境 (UTC: 2025-08-30 09:22:43.256767+00:00, CST: 2025-08-30 17:22:43.256769+08:00)
2025-08-30 17:22:43,257 - __main__ - INFO - ETF列表有效
2025-08-30 17:22:43,257 - __main__ - INFO - 当前北京时间: 2025-08-30 17:22:43
2025-08-30 17:22:43,257 - __main__ - INFO - 环境设置完成
2025-08-30 17:22:43,257 - __main__ - INFO - 开始更新全市场ETF列表
2025-08-30 17:22:43,257 - data_crawler.etf_list_manager - INFO - ℹ️ 无需更新，加载本地ETF列表
2025-08-30 17:22:43,259 - __main__ - INFO - 全市场ETF列表更新完成，共322只
2025-08-30 17:22:43,260 - utils.file_utils - ERROR - 获取文件修改时间失败 /home/runner/work/fish-etf/fish-etf/data/all_etfs.csv: name 'timedelta' is not defined
Traceback (most recent call last):
  File "/home/runner/work/fish-etf/fish-etf/utils/file_utils.py", line 314, in get_file_mtime
    beijing_time = utc_time.astimezone(timezone(timedelta(hours=8)))
NameError: name 'timedelta' is not defined
2025-08-30 17:22:43,260 - __main__ - ERROR - ETF列表更新失败: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'
Traceback (most recent call last):
  File "/home/runner/work/fish-etf/fish-etf/main.py", line 119, in handle_update_etf_list
    expiration_utc = utc_mtime + timedelta(days=Config.ETF_LIST_UPDATE_INTERVAL)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'
2025-08-30 17:22:44,228 - wechat_push.push - INFO - 微信消息发送成功
2025-08-30 17:22:44,229 - wechat_push.push - INFO - 已发送任务完成通知: update_etf_list - 失败
2025-08-30 17:22:44,230 - __main__ - INFO - ===== 任务执行结束：error =====
AkShare版本: 1.17.44
['amac_fund_abs', 'amac_fund_account_info', 'amac_fund_info', 'amac_fund_sub_info', 'amac_person_fund_org_list', 'fund', 'fund_announcement_personnel_em', 'fund_aum_em', 'fund_aum_hist_em', 'fund_aum_trend_em', 'fund_balance_position_lg', 'fund_cf_em', 'fund_etf_category_sina', 'fund_etf_dividend_sina', 'fund_etf_fund_daily_em', 'fund_etf_fund_info_em', 'fund_etf_hist_em', 'fund_etf_hist_min_em', 'fund_etf_hist_sina', 'fund_etf_spot_em', 'fund_etf_spot_ths', 'fund_exchange_rank_em', 'fund_fee_em', 'fund_fh_em', 'fund_fh_rank_em', 'fund_financial_fund_daily_em', 'fund_financial_fund_info_em', 'fund_graded_fund_daily_em', 'fund_graded_fund_info_em', 'fund_hk_fund_hist_em', 'fund_hk_rank_em', 'fund_hold_structure_em', 'fund_individual_achievement_xq', 'fund_individual_analysis_xq', 'fund_individual_basic_info_xq', 'fund_individual_detail_hold_xq', 'fund_individual_detail_info_xq', 'fund_individual_profit_probability_xq', 'fund_info_index_em', 'fund_lcx_rank_em', 'fund_linghuo_position_lg', 'fund_lof_hist_em', 'fund_lof_hist_min_em', 'fund_lof_spot_em', 'fund_manager_em', 'fund_money_fund_daily_em', 'fund_money_fund_info_em', 'fund_money_rank_em', 'fund_name_em', 'fund_new_found_em', 'fund_open_fund_daily_em', 'fund_open_fund_info_em', 'fund_open_fund_rank_em', 'fund_portfolio_bond_hold_em', 'fund_portfolio_change_em', 'fund_portfolio_hold_em', 'fund_portfolio_industry_allocation_em', 'fund_purchase_em', 'fund_rating_all', 'fund_rating_ja', 'fund_rating_sh', 'fund_rating_zs', 'fund_report_asset_allocation_cninfo', 'fund_report_industry_allocation_cninfo', 'fund_report_stock_cninfo', 'fund_scale_change_em', 'fund_scale_close_sina', 'fund_scale_open_sina', 'fund_scale_structured_sina', 'fund_stock_position_lg', 'fund_value_estimation_em', 'get_qhkc_fund_bs', 'get_qhkc_fund_money_change', 'get_qhkc_fund_position', 'index_hist_fund_sw', 'index_option_100etf_min_qvix', 'index_option_100etf_qvix', 'index_option_300etf_min_qvix', 'index_option_300etf_qvix', 'index_option_500etf_min_qvix', 'index_option_500etf_qvix', 'index_option_50etf_min_qvix', 'index_option_50etf_qvix', 'index_realtime_fund_sw', 'stock_concept_fund_flow_hist', 'stock_fund_flow_big_deal', 'stock_fund_flow_concept', 'stock_fund_flow_individual', 'stock_fund_flow_industry', 'stock_fund_stock_holder', 'stock_fundamental', 'stock_hsgt_fund_flow_summary_em', 'stock_hsgt_fund_min_em', 'stock_individual_fund_flow', 'stock_individual_fund_flow_rank', 'stock_individual_fund_flow_rank_async', 'stock_main_fund_flow', 'stock_market_fund_flow', 'stock_report_fund_hold', 'stock_report_fund_hold_detail', 'stock_sector_fund_flow_hist', 'stock_sector_fund_flow_rank', 'stock_sector_fund_flow_summary']
{
  "status": "error",
  "task": "update_etf_list",
  "message": "ETF列表更新失败: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'",
  "timestamp": "2025-08-30T17:22:43.256497+08:00"
}
